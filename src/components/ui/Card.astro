---
/**
 * Card - 统一卡片组件
 * 简洁优雅的玻璃态效果，适配暗色主题
 * 支持多种交互效果和动画
 */
interface Props {
	variant?: 'glass' | 'holographic' | 'neon' | 'brutal' | 'elevated' | 'outline';
	glow?: 'purple' | 'cyan' | 'green' | 'blue' | 'none';
	hover?: 'lift' | 'scale' | 'glow' | 'border' | 'none';
	className?: string;
	href?: string;
}

const {
	variant = 'glass',
	glow = 'none',
	hover = 'lift',
	className = '',
	href
} = Astro.props;

const Tag = href ? 'a' : 'div';

// 变体样式 - 统一设计语言
const variantClasses = {
	glass: 'bg-dark-surface/40 backdrop-blur-md border border-white/5 hover:border-white/10',
	holographic: 'bg-dark-surface/40 backdrop-blur-md border-2 border-transparent bg-gradient-to-br from-primary-500/20 via-transparent to-secondary-500/20',
	neon: 'bg-dark-surface/40 backdrop-blur-md border border-primary-500/30 hover:border-primary-500/50',
	brutal: 'bg-dark-surface border-2 border-white/10 hover:border-white/20',
	elevated: 'bg-white dark:bg-slate-800 shadow-md hover:shadow-xl border border-gray-100 dark:border-slate-700',
	outline: 'bg-transparent border-2 border-gray-200 dark:border-slate-700 hover:border-primary-500 dark:hover:border-primary-400',
};

// 发光效果（可选）
const glowClasses = {
	purple: 'hover:shadow-[0_0_30px_rgba(168,85,247,0.4)]',
	cyan: 'hover:shadow-[0_0_30px_rgba(6,182,212,0.4)]',
	green: 'hover:shadow-[0_0_30px_rgba(34,197,94,0.4)]',
	blue: 'hover:shadow-[0_0_30px_rgba(59,130,246,0.4)]',
	none: '',
};

// 悬停效果
const hoverClasses = {
	lift: 'hover:-translate-y-2',
	scale: 'hover:scale-[1.02]',
	glow: '',
	border: 'hover:border-primary-500',
	none: '',
};
---

<Tag
	href={href}
	class={`
		group relative block
		rounded-xl p-6
		transition-all duration-300 ease-out
		${variantClasses[variant]}
		${glowClasses[glow]}
		${href ? `cursor-pointer ${hoverClasses[hover]}` : ''}
		${className}
	`}
>
	<!-- 内容插槽 -->
	<slot />

	<!-- 悬停时的微光效果 - Glass 变体 -->
	{variant === 'glass' && (
		<div class="absolute inset-0 rounded-xl bg-gradient-to-br from-white/0 via-white/5 to-white/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
	)}

	<!-- 悬停时的边框流光效果 - Neon 变体 -->
	{variant === 'neon' && (
		<div class="absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none overflow-hidden">
			<div class="absolute inset-[-2px] bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 rounded-xl animate-border-flow bg-[length:200%_200%]"></div>
			<div class="absolute inset-[1px] bg-dark-surface rounded-xl"></div>
		</div>
	)}

	<!-- 悬停时的角标装饰 - Brutal 变体 -->
	{variant === 'brutal' && (
		<>
			<div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-primary-500 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:-translate-x-1 group-hover:translate-y-1 pointer-events-none rounded-tr-xl"></div>
			<div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-primary-500 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:translate-x-1 group-hover:-translate-y-1 pointer-events-none rounded-bl-xl"></div>
		</>
	)}
</Tag>

<style>
	/* 确保悬停时有平滑的动画 */
	a, div {
		backface-visibility: hidden;
		-webkit-font-smoothing: antialiased;
	}

	/* 边框流光动画 */
	@keyframes border-flow {
		0%, 100% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
	}

	.animate-border-flow {
		animation: border-flow 3s ease infinite;
	}
</style>
