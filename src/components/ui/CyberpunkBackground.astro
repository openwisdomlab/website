---
/**
 * CyberpunkBackground - 赛博朋克背景效果组件
 * 包含噪点纹理、科技网格、发光效果和浮动粒子
 */
interface Props {
	variant?: 'default' | 'grid' | 'noise' | 'particles' | 'radial';
	intensity?: 'low' | 'medium' | 'high';
	className?: string;
}

const { variant = 'default', intensity = 'medium', className = '' } = Astro.props;

const intensityClasses = {
	low: 'opacity-20',
	medium: 'opacity-40',
	high: 'opacity-60',
};
---

<!-- 基础深色背景 -->
<div class={`fixed inset-0 -z-50 bg-cyber-black ${className}`}>
	{/* 径向渐变 - 模拟光源 */}
	{(variant === 'default' || variant === 'radial') && (
		<div class="absolute inset-0 bg-gradient-radial-top from-primary-950/30 via-transparent to-transparent"></div>
	)}

	{/* 噪点纹理 - 胶片质感 */}
	{(variant === 'default' || variant === 'noise') && (
		<div class={`absolute inset-0 bg-noise ${intensityClasses[intensity]}`}></div>
	)}

	{/* 科技网格 */}
	{(variant === 'default' || variant === 'grid') && (
		<div class={`absolute inset-0 bg-grid bg-grid ${intensityClasses[intensity]}`}></div>
	)}

	{/* 浮动发光粒子 */}
	{(variant === 'default' || variant === 'particles') && (
		<>
			<div class="absolute top-1/4 left-1/4 w-96 h-96 bg-primary-500 opacity-10 rounded-full filter blur-3xl animate-float"></div>
			<div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-secondary-500 opacity-10 rounded-full filter blur-3xl animate-float-slow" style="animation-delay: 2s;"></div>
			<div class="absolute top-1/2 right-1/3 w-64 h-64 bg-neon-blue opacity-10 rounded-full filter blur-3xl animate-float-fast" style="animation-delay: 4s;"></div>
		</>
	)}

	{/* 扫描线效果 */}
	<div class="absolute inset-0 opacity-5 pointer-events-none">
		<div class="h-0.5 w-full bg-gradient-to-r from-transparent via-primary-400 to-transparent animate-scan"></div>
	</div>
</div>

<style>
	/* 额外的 CSS 效果 */
	@keyframes scanline {
		0% {
			transform: translateY(-100vh);
		}
		100% {
			transform: translateY(100vh);
		}
	}

	/* 添加细微的颗粒动画 */
	@keyframes grain {
		0%, 100% { transform: translate(0, 0); }
		10% { transform: translate(-5%, -5%); }
		20% { transform: translate(-10%, 5%); }
		30% { transform: translate(5%, -10%); }
		40% { transform: translate(-5%, 15%); }
		50% { transform: translate(-10%, 5%); }
		60% { transform: translate(15%, 0); }
		70% { transform: translate(0, 10%); }
		80% { transform: translate(-15%, 0); }
		90% { transform: translate(10%, 5%); }
	}
</style>
