---
/**
 * Input - 赛博朋克风格输入框组件
 * 特点：发光边框、霓虹焦点效果、等宽字体
 */
interface Props {
	type?: 'text' | 'email' | 'password' | 'number' | 'search';
	placeholder?: string;
	label?: string;
	name?: string;
	id?: string;
	required?: boolean;
	className?: string;
	variant?: 'default' | 'neon' | 'brutal';
}

const {
	type = 'text',
	placeholder,
	label,
	name,
	id,
	required = false,
	className = '',
	variant = 'default',
} = Astro.props;

const inputId = id || name || `input-${Math.random().toString(36).substr(2, 9)}`;

// 变体样式
const variantClasses = {
	default: 'border-white/20 focus:border-primary-400 focus:shadow-glow',
	neon: 'border-neon-purple/50 focus:border-neon-purple focus:shadow-neon',
	brutal: 'border-black border-3 shadow-brutal-sm focus:shadow-brutal',
};
---

<div class={`relative ${className}`}>
	{/* 标签 */}
	{label && (
		<label
			for={inputId}
			class="block mb-2 text-sm font-mono uppercase tracking-wider text-gray-400"
		>
			{label}
			{required && <span class="text-neon-pink ml-1">*</span>}
		</label>
	)}

	{/* 输入框容器 */}
	<div class="relative group">
		{/* 输入框 */}
		<input
			type={type}
			id={inputId}
			name={name}
			placeholder={placeholder}
			required={required}
			class={`
				w-full px-4 py-3
				bg-black/80 backdrop-blur-sm
				border-2 rounded-lg
				text-white font-mono
				placeholder:text-gray-500
				transition-all duration-300
				focus:outline-none
				${variantClasses[variant]}
				${variant === 'brutal' ? 'text-black bg-white' : ''}
			`}
		/>

		{/* 聚焦时的发光底线 */}
		{variant !== 'brutal' && (
			<div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-neon transition-all duration-300 group-focus-within:w-full"></div>
		)}

		{/* Brutal 阴影 */}
		{variant === 'brutal' && (
			<div class="absolute -bottom-1 -right-1 w-full h-full bg-black -z-10 rounded-lg transition-all group-focus-within:-bottom-0.5 group-focus-within:-right-0.5"></div>
		)}
	</div>

	{/* 状态指示器 */}
	<div class="absolute top-1/2 right-3 -translate-y-1/2 flex items-center gap-1 opacity-0 group-focus-within:opacity-100 transition-opacity">
		<span class="w-2 h-2 rounded-full bg-neon-green animate-pulse"></span>
		<span class="text-xs font-mono text-neon-green">ACTIVE</span>
	</div>
</div>

<style>
	/* 自定义滚动条（针对 textarea 等） */
	input::-webkit-scrollbar {
		width: 8px;
	}

	input::-webkit-scrollbar-track {
		background: rgba(0, 0, 0, 0.3);
		border-radius: 4px;
	}

	input::-webkit-scrollbar-thumb {
		background: rgba(191, 0, 255, 0.5);
		border-radius: 4px;
	}

	input::-webkit-scrollbar-thumb:hover {
		background: rgba(191, 0, 255, 0.7);
	}

	/* 自动填充样式 */
	input:-webkit-autofill,
	input:-webkit-autofill:hover,
	input:-webkit-autofill:focus {
		-webkit-text-fill-color: white;
		-webkit-box-shadow: 0 0 0px 1000px rgba(0, 0, 0, 0.8) inset;
		transition: background-color 5000s ease-in-out 0s;
	}
</style>
