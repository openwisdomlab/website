---
import { Picture } from 'astro:assets';

import { findImage } from '~/utils/images';
import { getPermalink } from '~/utils/permalinks';

const { post } = Astro.props;

const image = await findImage(post.image);
---

<article class="group mb-6 transition-all duration-300 hover:-translate-y-1">
	<a href={getPermalink(post.slug, 'post')} class="block">
		<div class="relative h-0 pb-[56.25%] lg:h-64 overflow-hidden bg-gray-400 dark:bg-slate-700 rounded-xl shadow-lg mb-6 group-hover:shadow-xl transition-shadow duration-300">
			{
				image && (
					<Picture
						src={image}
						class="absolute inset-0 object-cover w-full h-full rounded-xl bg-gray-400 dark:bg-slate-700 transform group-hover:scale-105 transition-transform duration-500 ease-out"
						widths={[400, 900]}
						sizes="(max-width: 900px) 400px, 900px"
						alt={post.title}
					/>
				)
			}
			<!-- Overlay on hover -->
			<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
			<!-- Read more indicator -->
			<div class="absolute bottom-4 left-4 right-4 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
				<span class="inline-flex items-center gap-2 text-white text-sm font-semibold">
					阅读更多
					<svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
					</svg>
				</span>
			</div>
		</div>
	</a>
	<h3 class="mb-2 text-xl font-bold leading-snug sm:text-2xl font-heading">
		<a
			href={getPermalink(post.slug, 'post')}
			class="text-slate-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-200"
		>
			{post.title}
		</a>
	</h3>
	<p class="text-gray-700 dark:text-gray-400 line-clamp-2">{post.excerpt || post.description}</p>
</article>
