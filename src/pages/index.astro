---
import { SITE } from '~/config';
import { getCanonical, getHomePermalink, getPermalink } from '~/utils/permalinks';
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';
import CyberpunkBackground from '~/components/ui/CyberpunkBackground.astro';
import Card from '~/components/ui/Card.astro';
import Button from '~/components/ui/Button.astro';
import MagneticButton from '~/components/ui/MagneticButton';
import TerminalText from '~/components/ui/TerminalText';

const meta = {
	title: SITE.title,
	description: SITE.description,
	canonical: getCanonical(getHomePermalink()),
};
---

<Layout {meta}>
	<!-- 统一暗色背景 -->
	<CyberpunkBackground variant="default" intensity="low" />

	<!-- Hero Section - 简洁优雅 -->
	<section class="relative min-h-screen flex items-center overflow-hidden">
		<div class="relative max-w-7xl mx-auto px-4 sm:px-6 py-20 z-10 w-full">
			<div class="grid lg:grid-cols-12 gap-12 items-center">
				<!-- 左侧：主标题和文案 -->
				<div class="lg:col-span-7 space-y-8">
					<!-- 系统状态标签 -->
					<div class="flex items-center gap-4 font-mono text-xs uppercase tracking-widest">
						<span class="px-3 py-1.5 bg-primary-500/10 text-primary-400 border border-primary-500/30 rounded-full flex items-center gap-2">
							<span class="w-2 h-2 bg-primary-500 rounded-full animate-pulse"></span>
							SYSTEM ONLINE
						</span>
						<span class="text-gray-600">V2.0</span>
					</div>

					<!-- 主标题 - 统一字体大小 -->
					<div class="space-y-6">
						<h1 class="font-display font-black text-6xl md:text-8xl leading-none tracking-tight">
							<span class="block text-white" data-i18n="hero.title">猫头鹰</span>
							<span class="block text-transparent bg-gradient-to-r from-primary-400 via-secondary-400 to-primary-500 bg-clip-text" data-i18n="hero.subtitle">
								实验室
							</span>
						</h1>

						<!-- 英文副标题 - 更小的字体 -->
						<div class="font-mono text-xs md:text-sm text-gray-500 uppercase tracking-wider pl-2 border-l-2 border-primary-500/50">
							Open Wisdom Lab
						</div>
					</div>

					<!-- 描述文字 - 更好的对比度 -->
					<div class="space-y-6 max-w-2xl">
						<p class="text-lg md:text-xl text-gray-300 leading-relaxed" data-i18n="hero.description.short">
							一个<span class="text-primary-400 font-semibold">开放、包容、创新</span>的学习空间，
							让有好奇心的人、天马行空的想法和有趣的问题在此<span class="text-secondary-400 font-semibold">汇聚和激发</span>。
						</p>

						<!-- 终端风格的标语 -->
						<div class="bg-black/40 backdrop-blur-sm border border-white/5 rounded-lg p-4">
							<TerminalText
								client:visible
								text="探索未知，创造未来 // Explore the unknown, create the future"
								speed={30}
								className="text-sm text-gray-400"
							/>
						</div>
					</div>

					<!-- CTA 按钮组 -->
					<div class="flex flex-wrap gap-4 items-center pt-4">
						<MagneticButton
							client:visible
							href={getPermalink('/about')}
							variant="neon"
							strength={0.2}
						>
							<Icon name="tabler:rocket" class="w-5 h-5 mr-2" />
							<span data-i18n="home.cta.explore">探索世界</span>
						</MagneticButton>

						<Button
							href={getPermalink('/contact')}
							variant="outline"
							size="lg"
						>
							<Icon name="tabler:mail" class="w-5 h-5 mr-2" />
							<span data-i18n="home.cta.contact">联系我们</span>
						</Button>
					</div>

					<!-- 统计数据 -->
					<div class="hidden md:flex items-center gap-8 pt-6 font-mono text-xs text-gray-600">
						<div class="flex flex-col">
							<span class="text-primary-400 text-2xl font-bold">1000+</span>
							<span class="uppercase tracking-wider">Projects</span>
						</div>
						<div class="w-px h-12 bg-white/5"></div>
						<div class="flex flex-col">
							<span class="text-secondary-400 text-2xl font-bold">50+</span>
							<span class="uppercase tracking-wider">Members</span>
						</div>
					</div>
				</div>

				<!-- 右侧：装饰元素 -->
				<div class="lg:col-span-5 relative hidden lg:block">
					<div class="relative">
						<!-- 浮动光晕 -->
						<div class="absolute -top-20 -right-10 w-64 h-64 bg-primary-500/10 rounded-full filter blur-3xl animate-float"></div>
						<div class="absolute bottom-0 left-0 w-48 h-48 bg-secondary-500/10 rounded-full filter blur-3xl animate-float-slow"></div>

						<!-- 主视觉 -->
						<div class="relative z-10">
							<div class="aspect-square flex items-center justify-center">
								<Icon name="tabler:telescope" class="w-48 h-48 text-primary-400/20 animate-float-slow" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- 向下滚动指示器 -->
		<div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-bounce">
			<span class="font-mono text-xs text-gray-600 uppercase tracking-widest">Scroll Down</span>
			<Icon name="tabler:chevron-down" class="w-6 h-6 text-primary-500/50" />
		</div>
	</section>

	<!-- 核心价值 - 统一卡片样式 -->
	<section class="relative py-24 overflow-hidden">
		<div class="relative max-w-7xl mx-auto px-4 sm:px-6 z-10">
			<!-- Section Header -->
			<div class="mb-16 max-w-3xl">
				<div class="font-mono text-xs text-primary-400 uppercase tracking-widest mb-4">
					[ CORE VALUES ]
				</div>
				<h2 class="font-display font-black text-5xl md:text-6xl text-white mb-4" data-i18n="home.values.title">
					核心价值
				</h2>
				<p class="text-lg text-gray-400" data-i18n="home.values.subtitle">
					培养面向未来的创新人才
				</p>
			</div>

			<!-- 价值卡片 - 统一样式 -->
			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
				<!-- 价值 1 -->
				<Card variant="glass" className="group hover:border-primary-500/30 transition-all">
					<div class="relative">
						<div class="flex items-start gap-4 mb-6">
							<div class="w-12 h-12 bg-primary-500/10 border border-primary-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
								<Icon name="tabler:bulb" class="w-6 h-6 text-primary-400" />
							</div>
							<div class="flex-1">
								<div class="font-mono text-xs text-gray-600 uppercase mb-2">001</div>
								<h3 class="font-display text-xl font-bold text-white" data-i18n="home.value1.title">
									问题驱动学习
								</h3>
							</div>
						</div>
						<p class="text-gray-400 text-sm leading-relaxed" data-i18n="home.value1.desc">
							从真实问题出发，在探索中学习，在解决问题中成长
						</p>
					</div>
				</Card>

				<!-- 价值 2 -->
				<Card variant="glass" className="group hover:border-secondary-500/30 transition-all">
					<div class="relative">
						<div class="flex items-start gap-4 mb-6">
							<div class="w-12 h-12 bg-secondary-500/10 border border-secondary-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
								<Icon name="tabler:atom" class="w-6 h-6 text-secondary-400" />
							</div>
							<div class="flex-1">
								<div class="font-mono text-xs text-gray-600 uppercase mb-2">002</div>
								<h3 class="font-display text-xl font-bold text-white" data-i18n="home.value2.title">
									跨学科融合
								</h3>
							</div>
						</div>
						<p class="text-gray-400 text-sm leading-relaxed" data-i18n="home.value2.desc">
							打破学科边界，培养综合思维和创新能力
						</p>
					</div>
				</Card>

				<!-- 价值 3 -->
				<Card variant="glass" className="group hover:border-tech-500/30 transition-all">
					<div class="relative">
						<div class="flex items-start gap-4 mb-6">
							<div class="w-12 h-12 bg-tech-500/10 border border-tech-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
								<Icon name="tabler:flask" class="w-6 h-6 text-tech-400" />
							</div>
							<div class="flex-1">
								<div class="font-mono text-xs text-gray-600 uppercase mb-2">003</div>
								<h3 class="font-display text-xl font-bold text-white" data-i18n="home.value3.title">
									实践导向
								</h3>
							</div>
						</div>
						<p class="text-gray-400 text-sm leading-relaxed" data-i18n="home.value3.desc">
							动手实践，在做中学，培养解决实际问题的能力
						</p>
					</div>
				</Card>
			</div>
		</div>
	</section>

	<!-- 快速导航 - 统一样式 -->
	<section class="relative py-24 bg-black/20">
		<div class="max-w-7xl mx-auto px-4 sm:px-6">
			<!-- Section Header -->
			<div class="text-center mb-16">
				<div class="font-mono text-xs text-primary-400 uppercase tracking-widest mb-4">
					[ EXPLORE MORE ]
				</div>
				<h2 class="font-display font-black text-5xl md:text-6xl text-white mb-4" data-i18n="home.explore.title">
					探索更多
				</h2>
			</div>

			<!-- 导航卡片 - 统一样式 -->
			<div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
				<!-- 关于我们 -->
				<Card variant="glass" href={getPermalink('/about')} className="group hover:border-primary-500/30 transition-all">
					<div class="flex flex-col h-full">
						<div class="flex items-center justify-between mb-4">
							<Icon name="tabler:info-circle" class="w-8 h-8 text-primary-400 group-hover:scale-110 transition-transform" />
							<span class="font-mono text-xs text-gray-600">01</span>
						</div>
						<h3 class="font-display text-xl font-bold text-white mb-2" data-i18n="nav.about">关于我们</h3>
						<p class="text-gray-500 text-sm flex-1" data-i18n="home.card.about">了解我们的愿景和使命</p>
					</div>
				</Card>

				<!-- 教育体系 -->
				<Card variant="glass" href={getPermalink('/education')} className="group hover:border-secondary-500/30 transition-all">
					<div class="flex flex-col h-full">
						<div class="flex items-center justify-between mb-4">
							<Icon name="tabler:school" class="w-8 h-8 text-secondary-400 group-hover:scale-110 transition-transform" />
							<span class="font-mono text-xs text-gray-600">02</span>
						</div>
						<h3 class="font-display text-xl font-bold text-white mb-2" data-i18n="nav.education">教育体系</h3>
						<p class="text-gray-500 text-sm flex-1" data-i18n="home.card.education">创生教育和问题驱动学习</p>
					</div>
				</Card>

				<!-- 课程体系 -->
				<Card variant="glass" href={getPermalink('/curriculum')} className="group hover:border-tech-500/30 transition-all">
					<div class="flex flex-col h-full">
						<div class="flex items-center justify-between mb-4">
							<Icon name="tabler:stairs-up" class="w-8 h-8 text-tech-400 group-hover:scale-110 transition-transform" />
							<span class="font-mono text-xs text-gray-600">03</span>
						</div>
						<h3 class="font-display text-xl font-bold text-white mb-2" data-i18n="nav.curriculum">课程体系</h3>
						<p class="text-gray-500 text-sm flex-1" data-i18n="home.card.curriculum">进阶式学习路径 B0-B3</p>
					</div>
				</Card>

				<!-- 科学挑战 -->
				<Card variant="glass" href={getPermalink('/challenges')} className="group hover:border-accent-500/30 transition-all">
					<div class="flex flex-col h-full">
						<div class="flex items-center justify-between mb-4">
							<Icon name="tabler:target" class="w-8 h-8 text-accent-400 group-hover:scale-110 transition-transform" />
							<span class="font-mono text-xs text-gray-600">04</span>
						</div>
						<h3 class="font-display text-xl font-bold text-white mb-2" data-i18n="nav.challenges">科学挑战</h3>
						<p class="text-gray-500 text-sm flex-1" data-i18n="home.card.challenges">前沿科研项目和挑战</p>
					</div>
				</Card>
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="relative py-24 overflow-hidden">
		<div class="relative max-w-4xl mx-auto px-4 sm:px-6 text-center z-10">
			<div class="font-mono text-xs text-primary-400 uppercase tracking-widest mb-6">
				[ JOIN US ]
			</div>
			<h2 class="font-display font-black text-4xl md:text-6xl text-white mb-6">
				准备好开始了吗？
			</h2>
			<p class="text-lg text-gray-400 mb-12 max-w-2xl mx-auto">
				加入我们，一起探索未知的世界，创造属于未来的可能
			</p>

			<div class="flex flex-wrap gap-6 justify-center items-center">
				<MagneticButton
					client:visible
					href={getPermalink('/contact')}
					variant="neon"
					strength={0.25}
					className="text-lg"
				>
					<Icon name="tabler:rocket" class="w-5 h-5 mr-2" />
					立即加入
				</MagneticButton>

				<Button variant="ghost" size="lg">
					<Icon name="tabler:brand-github" class="w-5 h-5 mr-2" />
					查看项目
				</Button>
			</div>

			<!-- 装饰性终端输出 -->
			<div class="mt-16 bg-black/60 backdrop-blur-sm border border-white/5 rounded-lg p-6 text-left max-w-2xl mx-auto">
				<div class="flex items-center gap-2 mb-4">
					<div class="w-3 h-3 rounded-full bg-primary-500"></div>
					<div class="w-3 h-3 rounded-full bg-secondary-500"></div>
					<div class="w-3 h-3 rounded-full bg-tech-500"></div>
					<span class="ml-auto font-mono text-xs text-gray-600">terminal.sh</span>
				</div>
				<TerminalText
					client:visible
					text="Welcome to Open Wisdom Lab. Initialize your journey now..."
					speed={40}
					delay={0.5}
				/>
			</div>
		</div>
	</section>
</Layout>

<style>
	/* 确保深色背景 */
	:global(body) {
		background: #030303;
	}

	/* 平滑滚动 */
	:global(html) {
		scroll-behavior: smooth;
	}

	/* 自定义滚动条 - 统一配色 */
	:global(::-webkit-scrollbar) {
		width: 8px;
	}

	:global(::-webkit-scrollbar-track) {
		background: #0a0a0a;
	}

	:global(::-webkit-scrollbar-thumb) {
		background: linear-gradient(180deg, #6366f1 0%, #d946ef 100%);
		border-radius: 4px;
	}

	:global(::-webkit-scrollbar-thumb:hover) {
		background: linear-gradient(180deg, #818cf8 0%, #e879f9 100%);
	}
</style>
